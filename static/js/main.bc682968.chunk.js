(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e){e.exports={siteUrl:"https://zarcode.github.io/gitlab-ci-pwa",clientId:"134f639e5be587597c61a236573989ad112728cdb7c45b063ddbd327efb0a4d1"}},125:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(78),o=n.n(c),i=(n(94),n(30)),u=n(131),p=n(135),l=n(134),s=n(12),E=n(100),d=E.clientId,b=E.siteUrl;var j=function(e){var t=e.hash,n="https://gitlab.com/oauth/authorize?client_id=".concat(d,"&redirect_uri=").concat(b)+"&response_type=token&state=".concat(t);return a.a.createElement("div",null,a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("a",{href:n},"Login"))))},O=(n(81),function(e){return{type:"LOGIN_REQUESTED",token:e}}),f=function(){return{type:"LOGOUT"}},h=n(126),I=n(82),S=n.n(I),_=n(58),g=n.n(_),v=n(83),m=n.n(v),C=(n(117),n(118),n(20)),T=n.n(C),y=n(60),P=n.n(y),F=n(84),L=n.n(F),k=(n(121),n(122),n(39)),w=[new k.b.Entity("pipeline")],H=function(e){return{type:"FETCH_PIPELINES",projectId:e}},U=n(19),N=n(9),R=n(85),A={byId:{},ids:[],loading:!1},J=function(e){return e.pipelines.loading},G=Object(R.a)([function(e){return e.pipelines.ids},function(e){return e.pipelines.byId}],function(e,t){return e.map(function(e){return t[e]})});var D=Object(i.b)(function(e){return{pipelines:G(e),loading:J(e)}},function(e){return{actions:Object(s.b)({fetchPipelines:H},e)}})(function(e){var t=e.pipelines,n=e.loading,c=e.actions,o=e.match;return e.history,Object(r.useEffect)(function(){n||T()(P()(c.fetchPipelines),L()(g()(m.a)),P()(parseInt),S()(["params","projectId"]))(o)},[]),a.a.createElement(a.a.Fragment,null,a.a.createElement(h.a,{to:"/"},"Projects"),a.a.createElement("h2",null,"Project"),t.map(function(e){return a.a.createElement("div",{key:e.id},a.a.createElement("h3",null,"#".concat(e.id)),a.a.createElement("div",null))}))});var x=Object(i.b)(function(e){return{stateHash:"hello",auth:e.auth}},function(e){return{actions:Object(s.b)({login:O,logout:f},e)}})(function(e){var t=e.stateHash,n=e.auth,c=e.actions,o=new URLSearchParams(window.location.hash),i=o.get("#access_token"),s=o.get("state");return Object(r.useEffect)(function(){!n.isAuthenticated&&i&&s===t&&c.login(i)},[]),a.a.createElement(a.a.Fragment,null,n.isAuthenticated?a.a.createElement(u.a,null,a.a.createElement("div",null,a.a.createElement("button",{onClick:c.logout},"Logout"),a.a.createElement(p.a,null,a.a.createElement(l.a,{exact:!0,path:"/",component:D}),a.a.createElement(l.a,{path:"/project/:projectId",component:D})))):a.a.createElement(j,{hash:t}))}),z=n(130),B=n(133),V=n(56),Q=n(77),W=n(127),X=n(128),M=n(132),$=n(129),q=n(76),K=n(32),Y=function(e){return e.then(function(e){if(!e.ok)throw Error(e.statusText);return e}).then(function(e){return e.json()})},Z=function(e){var t=e.url,n=e.token;Object(K.a)(e,["url","token"]);return fetch(t,{headers:{Authorization:"Bearer ".concat(n)}})},ee=T()(Y,Z,function(e){return Object(N.a)({url:"https://gitlab.com/api/v4/user"},e)}),te=T()(function(e){return console.log(e),e},Y,Z,function(e){var t=e.userId,n=Object(K.a)(e,["userId"]);return Object(N.a)({url:"https://gitlab.com/api/v4/users/".concat(t,"/projects")},n)}),ne=T()(Y,Z,function(e){var t=e.projectId,n=Object(K.a)(e,["projectId"]);return Object(N.a)({url:"https://gitlab.com/api/v4/projects/".concat(t,"/pipelines")},n)}),re=T()(Y,Z,function(e){var t=e.projectId,n=e.pipelineId,r=Object(K.a)(e,["projectId","pipelineId"]);return Object(N.a)({url:"https://gitlab.com/api/v4/projects/".concat(t,"/pipelines/").concat(n)},r)}),ae=(T()(Y,Z,function(e){e.projectId;var t=Object(K.a)(e,["projectId"]);return Object(N.a)({url:"https://gitlab.com/api/v4/projects/:id/pipelines/:pipeline_id/jobs"},t)}),function(e){try{!function(e){var t=JSON.stringify(e);localStorage.setItem("state",t)}(e)}catch(t){return{type:"NOT_SAVED"}}return{type:"SAVED"}}),ce=Object(B.a)(function(e,t){return e.pipe(Object(W.a)(function(e){return"LOGIN_REQUESTED"===e.type}),Object(X.a)(function(e){return Object(V.a)(ee({token:e.token})).pipe(Object(X.a)(function(n){return Object(Q.a)((r=n,{type:"FETCH_USER_SUCCESS",response:r})).pipe(Object(M.a)(Object(Q.a)(ae({auth:t.value.auth,user:n})),Object(Q.a)({type:"LOGIN_SUCCESS",token:e.token}),Object(Q.a)({type:"FETCH_PROJECTS"})));var r}),Object($.a)(function(e){return Object(Q.a)({type:"FETCH_USER_FAIL",error:e.message})}))}))},function(e,t){return e.pipe(Object(W.a)(function(e){return"LOGOUT"===e.type}),Object(q.a)(function(e){return ae({auth:t.value.auth,user:{}})}))},function(e,t){return e.ofType("FETCH_PROJECTS").pipe(Object(X.a)(function(){return Object(V.a)(te({token:t.value.auth.token,userId:t.value.user.id})).pipe(Object(q.a)(function(e){return{type:"FETCH_PROJECTS_SUCCESS",response:e}}),Object($.a)(function(e){return Object(Q.a)({type:"FETCH_PROJECTS_FAIL",error:e.message})}))}))},function(e,t){return e.ofType("FETCH_PIPELINES").pipe(Object(X.a)(function(e){return Object(V.a)(ne({token:t.value.auth.token,projectId:e.projectId})).pipe(Object(X.a)(function(t){return Object(Q.a)((n=t,{type:"FETCH_PIPELINES_SUCCESS",response:Object(k.a)(n,w)})).pipe(M.a.apply(void 0,Object(U.a)(t.map(function(t){return Object(Q.a)({type:"FETCH_PIPELINE",pipelineId:t.id,projectId:e.projectId})}))));var n}),Object($.a)(function(e){return Object(Q.a)({type:"FETCH_PIPELINES_FAIL",error:e.message})}))}))},function(e,t){return e.ofType("FETCH_PIPELINE").pipe(Object(X.a)(function(e){return Object(V.a)(re({token:t.value.auth.token,pipelineId:e.pipelineId,projectId:e.projectId})).pipe(Object(q.a)(function(e){return{type:"FETCH_PIPELINE_SUCCESS",response:e}}),Object($.a)(function(e){return Object(Q.a)({type:"FETCH_PIPELINE_FAIL",error:e.message})}))}))}),oe={isAuthenticated:!1,token:null},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return{isAuthenticated:!0,token:t.token};case"LOGOUT":return oe;default:return e}},ue={list:[],loading:!1},pe=Object(s.c)({auth:ie,projects:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PROJECTS":return Object(N.a)({},e,{loading:!0});case"FETCH_PROJECTS_SUCCESS":return{loading:!1,list:Object(U.a)(e.list).concat(Object(U.a)(t.response))};case"FETCH_PROJECTS_FAIL":return Object(N.a)({},e,{loading:!1});default:return e}},pipelines:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PIPELINES":return Object(N.a)({},e,{loading:!0});case"FETCH_PIPELINES_SUCCESS":return{byId:Object(N.a)({},e.byId,t.response.entities.pipeline),ids:Object(U.a)(e.ids).concat(Object(U.a)(t.response.result)),loading:!1};case"FETCH_PIPELINES_FAIL":return Object(N.a)({},e,{loading:!1});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USER_SUCCESS":return Object(N.a)({},e,t.response);case"FETCH_USER_FAIL":default:return e}}}),le=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),se=function(){var e=Object(z.a)(),t=[e],n=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,r=Object(s.e)(pe,le,n(s.a.apply(void 0,t)));return e.run(ce),r}(),Ee=function(){return a.a.createElement(i.a,{store:se},a.a.createElement(x,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(Ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},89:function(e,t,n){e.exports=n(125)},94:function(e,t,n){}},[[89,2,1]]]);
//# sourceMappingURL=main.bc682968.chunk.js.map