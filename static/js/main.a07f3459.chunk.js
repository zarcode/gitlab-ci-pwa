(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return a});var r=function(){return{type:"FETCH_PROJECTS"}},c=function(e){return{type:"FETCH_PROJECTS_SUCCESS",response:e}},a=function(e){return{type:"FETCH_PROJECTS_FAIL",error:e}}},28:function(e,t,n){"use strict";var r=n(43),c=[new r.b.Entity("pipeline")];n.d(t,"a",function(){return a}),n.d(t,"e",function(){return o}),n.d(t,"d",function(){return u}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return l});var a=function(e){return{type:"FETCH_PIPELINES",projectId:e}},o=function(e){return{type:"FETCH_PIPELINES_SUCCESS",response:Object(r.a)(e,c)}},u=function(e){return{type:"FETCH_PIPELINES_FAIL",error:e}},i=function(e){return{type:"FETCH_PIPELINE_SUCCESS",response:e}},l=function(e){return{type:"FETCH_PIPELINE_FAIL",error:e}}},53:function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"c",function(){return i});var r=n(16),c=n(7),a=n(60),o={byId:{},ids:[],loading:!1};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PIPELINES":return Object(c.a)({},e,{loading:!0});case"FETCH_PIPELINES_SUCCESS":return{byId:Object(c.a)({},e.byId,t.response.entities.pipeline),ids:Object(r.a)(e.ids).concat(Object(r.a)(t.response.result)),loading:!1};case"FETCH_PIPELINES_FAIL":return Object(c.a)({},e,{loading:!1});default:return e}};var u=function(e){return e.pipelines.loading},i=Object(a.a)([function(e){return e.pipelines.ids},function(e){return e.pipelines.byId}],function(e,t){return e.map(function(e){return t[e]})})},63:function(e,t,n){e.exports=n(83)},68:function(e,t,n){},74:function(e){e.exports={siteUrl:"https://zarcode.github.io/gitlab-ci-pwa",clientId:"134f639e5be587597c61a236573989ad112728cdb7c45b063ddbd327efb0a4d1"}},83:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(55),o=n.n(a),u=(n(68),n(30)),i=n(138),l=n(139),p=n(141),s=n(11),d=n(74),E=d.clientId,f=d.siteUrl;var b=function(e){var t=e.hash,n="https://gitlab.com/oauth/authorize?client_id=".concat(E,"&redirect_uri=").concat(f)+"&response_type=token&state=".concat(t);return c.a.createElement("div",null,c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("a",{href:n},"Login"))))},O=(n(58),function(e){return{type:"LOGIN_REQUESTED",token:e}}),j=function(){return{type:"LOGOUT"}},h=Object(r.lazy)(function(){return n.e(1).then(n.bind(null,133))}),I=Object(r.lazy)(function(){return Promise.all([n.e(5),n.e(2)]).then(n.bind(null,134))}),S=Object(r.lazy)(function(){return n.e(3).then(n.bind(null,135))});var _=Object(u.b)(function(e){return{stateHash:"hello",auth:e.auth}},function(e){return{actions:Object(s.b)({login:O,logout:j},e)}})(function(e){var t=e.stateHash,n=e.auth,a=e.actions,o=new URLSearchParams(window.location.hash),u=o.get("#access_token"),s=o.get("state");return Object(r.useEffect)(function(){!n.isAuthenticated&&u&&s===t&&a.login(u)},[]),c.a.createElement(c.a.Fragment,null,n.isAuthenticated?c.a.createElement(i.a,null,c.a.createElement("div",null,c.a.createElement("button",{onClick:a.logout},"Logout"),c.a.createElement(r.Suspense,{fallback:c.a.createElement("div",null,"Loading...")},c.a.createElement(l.a,null,c.a.createElement(p.a,{exact:!0,path:"/",component:h}),c.a.createElement(p.a,{path:"/project/:projectId",component:I}),c.a.createElement(p.a,{component:S}))))):c.a.createElement(b,{hash:t}))}),v=n(136),g=n(140),C=n(31),m=n(54),y=n(130),T=n(131),P=n(137),F=n(132),L=n(52),k=n(26),w=n(7),H=n(25),U=n(23),N=n.n(U),A=function(e){return e.then(function(e){if(!e.ok)throw Error(e.statusText);return e}).then(function(e){return e.json()})},R=function(e){var t=e.url,n=e.token;Object(H.a)(e,["url","token"]);return fetch(t,{headers:{Authorization:"Bearer ".concat(n)}})},J=N()(A,R,function(e){return Object(w.a)({url:"https://gitlab.com/api/v4/user"},e)}),G=N()(function(e){return console.log(e),e},A,R,function(e){var t=e.userId,n=Object(H.a)(e,["userId"]);return Object(w.a)({url:"https://gitlab.com/api/v4/users/".concat(t,"/projects")},n)}),z=N()(A,R,function(e){var t=e.projectId,n=Object(H.a)(e,["projectId"]);return Object(w.a)({url:"https://gitlab.com/api/v4/projects/".concat(t,"/pipelines")},n)}),D=N()(A,R,function(e){var t=e.projectId,n=e.pipelineId,r=Object(H.a)(e,["projectId","pipelineId"]);return Object(w.a)({url:"https://gitlab.com/api/v4/projects/".concat(t,"/pipelines/").concat(n)},r)}),x=(N()(A,R,function(e){e.projectId;var t=Object(H.a)(e,["projectId"]);return Object(w.a)({url:"https://gitlab.com/api/v4/projects/:id/pipelines/:pipeline_id/jobs"},t)}),function(e){try{!function(e){var t=JSON.stringify(e);try{localStorage.setItem("state",t)}catch(n){console.log(n)}}(e)}catch(t){return{type:"NOT_SAVED"}}return{type:"SAVED"}}),B=n(16),V=n(28),Q=Object(g.a)(function(e,t){return e.pipe(Object(y.a)(function(e){return"LOGIN_REQUESTED"===e.type}),Object(T.a)(function(e){return Object(C.a)(J({token:e.token})).pipe(Object(T.a)(function(t){return Object(m.a)((n=t,{type:"FETCH_USER_SUCCESS",response:n})).pipe(Object(P.a)(Object(m.a)(x({auth:{isAuthenticated:!0,token:e.token},user:t})),Object(m.a)({type:"LOGIN_SUCCESS",token:e.token}),Object(m.a)(Object(k.a)())));var n}),Object(F.a)(function(e){return Object(m.a)({type:"FETCH_USER_FAIL",error:e.message})}))}))},function(e,t){return e.pipe(Object(y.a)(function(e){return"LOGOUT"===e.type}),Object(L.a)(function(e){return x({auth:t.value.auth,user:{}})}))},function(e,t){return e.ofType("FETCH_PROJECTS").pipe(Object(T.a)(function(){return Object(C.a)(G({token:t.value.auth.token,userId:t.value.user.id})).pipe(Object(L.a)(function(e){return k.c(e)}),Object(F.a)(function(e){return Object(m.a)(k.b(e.message))}))}))},function(e,t){return e.ofType("FETCH_PIPELINES").pipe(Object(T.a)(function(e){return Object(C.a)(z({token:t.value.auth.token,projectId:e.projectId})).pipe(Object(T.a)(function(t){return Object(m.a)(V.e(t)).pipe(P.a.apply(void 0,Object(B.a)(t.map(function(t){return Object(m.a)({type:"FETCH_PIPELINE",pipelineId:t.id,projectId:e.projectId})}))))}),Object(F.a)(function(e){return Object(m.a)(V.d(e.message))}))}))},function(e,t){return e.ofType("FETCH_PIPELINE").pipe(Object(T.a)(function(e){return Object(C.a)(D({token:t.value.auth.token,pipelineId:e.pipelineId,projectId:e.projectId})).pipe(Object(L.a)(function(e){return V.c(e)}),Object(F.a)(function(e){return Object(m.a)(V.b(e.message))}))}))}),W={isAuthenticated:!1,token:null},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return{isAuthenticated:!0,token:t.token};case"LOGOUT":return W;default:return e}},M=n(53),$={list:[],loading:!1},q=Object(s.c)({auth:X,projects:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PROJECTS":return Object(w.a)({},e,{loading:!0});case"FETCH_PROJECTS_SUCCESS":return{loading:!1,list:Object(B.a)(e.list).concat(Object(B.a)(t.response))};case"FETCH_PROJECTS_FAIL":return Object(w.a)({},e,{loading:!1});default:return e}},pipelines:M.a,user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USER_SUCCESS":return Object(w.a)({},e,t.response);case"FETCH_USER_FAIL":default:return e}}}),K=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return void console.log(t)}}(),Y=function(){var e=Object(v.a)(),t=[e],n=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,r=Object(s.e)(q,K,n(s.a.apply(void 0,t)));return e.run(Q),r}(),Z=function(){return c.a.createElement(u.a,{store:Y},c.a.createElement(_,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[63,6,4]]]);
//# sourceMappingURL=main.a07f3459.chunk.js.map