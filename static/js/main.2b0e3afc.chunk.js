(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"c",function(){return c}),n.d(e,"b",function(){return a});var r=function(){return{type:"FETCH_PROJECTS"}},c=function(t){return{type:"FETCH_PROJECTS_SUCCESS",response:t}},a=function(t){return{type:"FETCH_PROJECTS_FAIL",error:t}}},28:function(t,e,n){"use strict";var r=n(43),c=[new r.b.Entity("pipeline")];n.d(e,"a",function(){return a}),n.d(e,"e",function(){return o}),n.d(e,"d",function(){return u}),n.d(e,"c",function(){return i}),n.d(e,"b",function(){return l});var a=function(t){return{type:"FETCH_PIPELINES",projectId:t}},o=function(t){return{type:"FETCH_PIPELINES_SUCCESS",response:Object(r.a)(t,c)}},u=function(t){return{type:"FETCH_PIPELINES_FAIL",error:t}},i=function(t){return{type:"FETCH_PIPELINE_SUCCESS",response:t}},l=function(t){return{type:"FETCH_PIPELINE_FAIL",error:t}}},50:function(t){t.exports={domain:"https://zarcode.github.io",root:"/gitlab-ci-pwa",clientId:"134f639e5be587597c61a236573989ad112728cdb7c45b063ddbd327efb0a4d1"}},54:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"c",function(){return i});var r=n(16),c=n(7),a=n(61),o={byId:{},ids:[],loading:!1};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_PIPELINES":return Object(c.a)({},t,{loading:!0});case"FETCH_PIPELINES_SUCCESS":return{byId:Object(c.a)({},t.byId,e.response.entities.pipeline),ids:Object(r.a)(t.ids).concat(Object(r.a)(e.response.result)),loading:!1};case"FETCH_PIPELINES_FAIL":return Object(c.a)({},t,{loading:!1});default:return t}};var u=function(t){return t.pipelines.loading},i=Object(a.a)([function(t){return t.pipelines.ids},function(t){return t.pipelines.byId}],function(t,e){return t.map(function(t){return e[t]})})},64:function(t,e,n){t.exports=n(83)},69:function(t,e,n){},83:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(56),o=n.n(a),u=(n(69),n(30)),i=n(138),l=n(139),p=n(141),s=n(11),d=n(50),E=d.clientId,f=d.domain,b=d.root;var O=function(t){var e=t.hash,n="https://gitlab.com/oauth/authorize?client_id=".concat(E,"&redirect_uri=").concat(f).concat(b)+"&response_type=token&state=".concat(e);return c.a.createElement("div",null,c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("a",{href:n},"Login"))))},j=(n(59),function(t){return{type:"LOGIN_REQUESTED",token:t}}),h=function(){return{type:"LOGOUT"}},I=n(50).root,S=Object(r.lazy)(function(){return n.e(1).then(n.bind(null,133))}),_=Object(r.lazy)(function(){return Promise.all([n.e(5),n.e(2)]).then(n.bind(null,134))}),v=Object(r.lazy)(function(){return n.e(3).then(n.bind(null,135))});var g=Object(u.b)(function(t){return{stateHash:"hello",auth:t.auth}},function(t){return{actions:Object(s.b)({login:j,logout:h},t)}})(function(t){var e=t.stateHash,n=t.auth,a=t.actions,o=new URLSearchParams(window.location.hash),u=o.get("#access_token"),s=o.get("state");return Object(r.useEffect)(function(){!n.isAuthenticated&&u&&s===e&&a.login(u)},[]),c.a.createElement(c.a.Fragment,null,n.isAuthenticated?c.a.createElement(i.a,null,c.a.createElement("div",null,c.a.createElement("button",{onClick:a.logout},"Logout"),c.a.createElement(r.Suspense,{fallback:c.a.createElement("div",null,"Loading...")},c.a.createElement(l.a,null,c.a.createElement(p.a,{exact:!0,path:"".concat(I,"/"),component:S}),c.a.createElement(p.a,{path:"".concat(I,"/project/:projectId"),component:_}),c.a.createElement(p.a,{component:v}))))):c.a.createElement(O,{hash:e}))}),C=n(136),m=n(140),y=n(31),T=n(55),P=n(130),F=n(131),L=n(137),k=n(132),w=n(53),H=n(26),N=n(7),U=n(25),A=n(23),R=n.n(A),J=function(t){return t.then(function(t){if(!t.ok)throw Error(t.statusText);return t}).then(function(t){return t.json()})},G=function(t){var e=t.url,n=t.token;Object(U.a)(t,["url","token"]);return fetch(e,{headers:{Authorization:"Bearer ".concat(n)}})},z=R()(J,G,function(t){return Object(N.a)({url:"https://gitlab.com/api/v4/user"},t)}),D=R()(function(t){return console.log(t),t},J,G,function(t){var e=t.userId,n=Object(U.a)(t,["userId"]);return Object(N.a)({url:"https://gitlab.com/api/v4/users/".concat(e,"/projects")},n)}),x=R()(J,G,function(t){var e=t.projectId,n=Object(U.a)(t,["projectId"]);return Object(N.a)({url:"https://gitlab.com/api/v4/projects/".concat(e,"/pipelines")},n)}),B=R()(J,G,function(t){var e=t.projectId,n=t.pipelineId,r=Object(U.a)(t,["projectId","pipelineId"]);return Object(N.a)({url:"https://gitlab.com/api/v4/projects/".concat(e,"/pipelines/").concat(n)},r)}),V=(R()(J,G,function(t){t.projectId;var e=Object(U.a)(t,["projectId"]);return Object(N.a)({url:"https://gitlab.com/api/v4/projects/:id/pipelines/:pipeline_id/jobs"},e)}),function(t){try{!function(t){var e=JSON.stringify(t);try{localStorage.setItem("state",e)}catch(n){console.log(n)}}(t)}catch(e){return{type:"NOT_SAVED"}}return{type:"SAVED"}}),Q=n(16),W=n(28),X=Object(m.a)(function(t,e){return t.pipe(Object(P.a)(function(t){return"LOGIN_REQUESTED"===t.type}),Object(F.a)(function(t){return Object(y.a)(z({token:t.token})).pipe(Object(F.a)(function(e){return Object(T.a)((n=e,{type:"FETCH_USER_SUCCESS",response:n})).pipe(Object(L.a)(Object(T.a)(V({auth:{isAuthenticated:!0,token:t.token},user:e})),Object(T.a)({type:"LOGIN_SUCCESS",token:t.token}),Object(T.a)(Object(H.a)())));var n}),Object(k.a)(function(t){return Object(T.a)({type:"FETCH_USER_FAIL",error:t.message})}))}))},function(t,e){return t.pipe(Object(P.a)(function(t){return"LOGOUT"===t.type}),Object(w.a)(function(t){return V({auth:e.value.auth,user:{}})}))},function(t,e){return t.ofType("FETCH_PROJECTS").pipe(Object(F.a)(function(){return Object(y.a)(D({token:e.value.auth.token,userId:e.value.user.id})).pipe(Object(w.a)(function(t){return H.c(t)}),Object(k.a)(function(t){return Object(T.a)(H.b(t.message))}))}))},function(t,e){return t.ofType("FETCH_PIPELINES").pipe(Object(F.a)(function(t){return Object(y.a)(x({token:e.value.auth.token,projectId:t.projectId})).pipe(Object(F.a)(function(e){return Object(T.a)(W.e(e)).pipe(L.a.apply(void 0,Object(Q.a)(e.map(function(e){return Object(T.a)({type:"FETCH_PIPELINE",pipelineId:e.id,projectId:t.projectId})}))))}),Object(k.a)(function(t){return Object(T.a)(W.d(t.message))}))}))},function(t,e){return t.ofType("FETCH_PIPELINE").pipe(Object(F.a)(function(t){return Object(y.a)(B({token:e.value.auth.token,pipelineId:t.pipelineId,projectId:t.projectId})).pipe(Object(w.a)(function(t){return W.c(t)}),Object(k.a)(function(t){return Object(T.a)(W.b(t.message))}))}))}),M={isAuthenticated:!1,token:null},$=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"LOGIN_SUCCESS":return{isAuthenticated:!0,token:e.token};case"LOGOUT":return M;default:return t}},q=n(54),K={list:[],loading:!1},Y=Object(s.c)({auth:$,projects:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_PROJECTS":return Object(N.a)({},t,{loading:!0});case"FETCH_PROJECTS_SUCCESS":return{loading:!1,list:Object(Q.a)(t.list).concat(Object(Q.a)(e.response))};case"FETCH_PROJECTS_FAIL":return Object(N.a)({},t,{loading:!1});default:return t}},pipelines:q.a,user:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_USER_SUCCESS":return Object(N.a)({},t,e.response);case"FETCH_USER_FAIL":default:return t}}}),Z=function(){try{var t=localStorage.getItem("state");if(null===t)return;return JSON.parse(t)}catch(e){return void console.log(e)}}(),tt=function(){var t=Object(C.a)(),e=[t],n=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,r=Object(s.e)(Y,Z,n(s.a.apply(void 0,e)));return t.run(X),r}(),et=function(){return c.a.createElement(u.a,{store:tt},c.a.createElement(g,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(et,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[64,6,4]]]);
//# sourceMappingURL=main.2b0e3afc.chunk.js.map