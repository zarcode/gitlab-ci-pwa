(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return a});var r=function(){return{type:"FETCH_PROJECTS"}},c=function(e){return console.log(e),{type:"FETCH_PROJECTS_SUCCESS",response:e}},a=function(e){return{type:"FETCH_PROJECTS_FAIL",error:e}}},28:function(e,t,n){"use strict";var r=n(45),c=[new r.b.Entity("pipeline")];n.d(t,"a",function(){return a}),n.d(t,"e",function(){return u}),n.d(t,"d",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return p});var a=function(e){return{type:"FETCH_PIPELINES",projectId:e}},u=function(e){return{type:"FETCH_PIPELINES_SUCCESS",response:Object(r.a)(e,c)}},o=function(e){return{type:"FETCH_PIPELINES_FAIL",error:e}},i=function(e){return{type:"FETCH_PIPELINE_SUCCESS",response:e}},p=function(e){return{type:"FETCH_PIPELINE_FAIL",error:e}}},54:function(e,t,n){"use strict";n.d(t,"b",function(){return o});var r=n(16),c=n(12),a=n(60),u={byId:{},ids:[]};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PIPELINES_SUCCESS":return{byId:Object(c.a)({},e.byId,t.response.entities.pipeline),ids:Object(r.a)(e.ids).concat(Object(r.a)(t.response.result))};case"FETCH_PIPELINES_FAIL":default:return e}};var o=Object(a.a)([function(e){return e.pipelines.ids},function(e){return e.pipelines.byId}],function(e,t){return e.map(function(e){return t[e]})})},63:function(e,t,n){e.exports=n(83)},68:function(e,t,n){},74:function(e){e.exports={siteUrl:"https://zarcode.github.io/gitlab-ci-pwa",clientId:"134f639e5be587597c61a236573989ad112728cdb7c45b063ddbd327efb0a4d1"}},83:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(55),u=n.n(a),o=(n(68),n(30)),i=n(137),p=n(138),l=n(139),s=n(10),f=n(74),d=f.clientId,b=f.siteUrl;var E=function(e){var t=e.hash,n="https://gitlab.com/oauth/authorize?client_id=".concat(d,"&redirect_uri=").concat(b)+"&response_type=token&state=".concat(t);return c.a.createElement("div",null,c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("a",{href:n},"Login"))))},O=(n(58),function(e){return{type:"LOGIN",token:e}}),j=function(){return{type:"LOGOUT"}},h=Object(r.lazy)(function(){return n.e(1).then(n.bind(null,133))}),I=Object(r.lazy)(function(){return Promise.all([n.e(4),n.e(2)]).then(n.bind(null,134))});var v=Object(o.b)(function(e){return{stateHash:"hello",auth:e.auth}},function(e){return{actions:Object(s.b)({login:O,logout:j},e)}})(function(e){var t=e.stateHash,n=e.auth,a=e.actions,u=new URLSearchParams(window.location.hash),o=u.get("#access_token"),s=u.get("state");return Object(r.useEffect)(function(){!n.isAuthenticated&&o&&s===t&&a.login(o)},[]),c.a.createElement(c.a.Fragment,null,n.isAuthenticated?c.a.createElement(i.a,null,c.a.createElement("div",null,c.a.createElement("button",{onClick:a.logout},"Logout"),c.a.createElement(r.Suspense,{fallback:c.a.createElement("div",null,"Loading...")},c.a.createElement(p.a,null,c.a.createElement(l.a,{exact:!0,path:"/",component:h}),c.a.createElement(l.a,{path:"/project/:projectId",component:I}))))):c.a.createElement(E,{hash:t}))}),S=n(135),_=n(140),m=n(31),C=n(46),g=n(130),y=n(131),T=n(136),P=n(132),F=n(43),L=n(26),w=n(12),k=n(25),H=n(23),N=n.n(H),U=function(e){return e.then(function(e){if(!e.ok)throw Error(e.statusText);return e}).then(function(e){return e.json()})},A=function(e){var t=e.url,n=e.token;Object(k.a)(e,["url","token"]);return fetch(t,{headers:{Authorization:"Bearer ".concat(n)}})},R=N()(U,A,function(e){return Object(w.a)({url:"https://gitlab.com/api/v4/user"},e)}),J=N()(U,A,function(e){var t=e.userId,n=Object(k.a)(e,["userId"]);return Object(w.a)({url:"https://gitlab.com/api/v4/users/".concat(t,"/projects")},n)}),G=N()(U,A,function(e){var t=e.projectId,n=Object(k.a)(e,["projectId"]);return Object(w.a)({url:"https://gitlab.com/api/v4/projects/".concat(t,"/pipelines")},n)}),z=N()(U,A,function(e){var t=e.projectId,n=e.pipelineId,r=Object(k.a)(e,["projectId","pipelineId"]);return Object(w.a)({url:"https://gitlab.com/api/v4/projects/".concat(t,"/pipelines/").concat(n)},r)}),x=(N()(U,A,function(e){e.projectId;var t=Object(k.a)(e,["projectId"]);return Object(w.a)({url:"https://gitlab.com/api/v4/projects/:id/pipelines/:pipeline_id/jobs"},t)}),function(e){try{!function(e){var t=JSON.stringify(e);localStorage.setItem("state",t)}(e)}catch(t){return{type:"NOT_SAVED"}}return{type:"SAVED"}}),D=n(16),B=n(28),V=Object(_.a)(function(e,t){return e.pipe(Object(g.a)(function(e){return"LOGIN"===e.type}),Object(y.a)(function(e){return Object(m.a)(R({token:t.value.auth.token})).pipe(Object(y.a)(function(e){return Object(C.a)((n=e,{type:"FETCH_USER_SUCCESS",response:n})).pipe(Object(T.a)(Object(C.a)(x({auth:t.value.auth,user:e})),Object(C.a)(L.a)));var n}),Object(P.a)(function(e){return Object(C.a)({type:"FETCH_USER_FAIL",error:e.message})}))}))},function(e,t){return e.pipe(Object(g.a)(function(e){return"LOGOUT"===e.type}),Object(F.a)(function(e){return x({auth:t.value.auth,user:{}})}))},function(e,t){return e.ofType("FETCH_PROJECTS").pipe(Object(y.a)(function(){return Object(m.a)(J({token:t.value.auth.token,userId:t.value.user.id})).pipe(Object(F.a)(function(e){return L.c(e)}),Object(P.a)(function(e){return Object(C.a)(L.b(e.message))}))}))},function(e,t){return e.ofType("FETCH_PIPELINES").pipe(Object(y.a)(function(e){return Object(m.a)(G({token:t.value.auth.token,projectId:e.projectId})).pipe(Object(y.a)(function(t){return Object(C.a)(B.e(t)).pipe(T.a.apply(void 0,Object(D.a)(t.map(function(t){return Object(C.a)({type:"FETCH_PIPELINE",pipelineId:t.id,projectId:e.projectId})}))))}),Object(P.a)(function(e){return Object(C.a)(B.d(e.message))}))}))},function(e,t){return e.ofType("FETCH_PIPELINE").pipe(Object(y.a)(function(e){return Object(m.a)(z({token:t.value.auth.token,pipelineId:e.pipelineId,projectId:e.projectId})).pipe(Object(F.a)(function(e){return B.c(e)}),Object(P.a)(function(e){return Object(C.a)(B.b(e.message))}))}))}),W={isAuthenticated:!1,token:null},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return{isAuthenticated:!0,token:t.token};case"LOGOUT":return W;default:return e}},M=n(54),$=Object(s.c)({auth:X,projects:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PROJECTS_SUCCESS":return Object(D.a)(e).concat(Object(D.a)(t.response));case"FETCH_PROJECTS_FAIL":default:return e}},pipelines:M.a,user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USER_SUCCESS":return Object(w.a)({},e,t.response);case"FETCH_USER_FAIL":default:return e}}}),q=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),K=function(){var e=Object(S.a)(),t=[e],n=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,r=Object(s.e)($,q,n(s.a.apply(void 0,t)));return e.run(V),r}(),Q=function(){return c.a.createElement(o.a,{store:K},c.a.createElement(v,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(c.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[63,5,3]]]);
//# sourceMappingURL=main.60d74e00.chunk.js.map