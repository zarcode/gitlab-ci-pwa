(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"c",function(){return c}),n.d(e,"b",function(){return a});var r=function(){return{type:"FETCH_PROJECTS"}},c=function(t){return{type:"FETCH_PROJECTS_SUCCESS",response:t}},a=function(t){return{type:"FETCH_PROJECTS_FAIL",error:t}}},28:function(t,e,n){"use strict";var r=n(45),c=[new r.b.Entity("pipeline")];n.d(e,"a",function(){return a}),n.d(e,"e",function(){return o}),n.d(e,"d",function(){return u}),n.d(e,"c",function(){return i}),n.d(e,"b",function(){return l});var a=function(t){return{type:"FETCH_PIPELINES",projectId:t}},o=function(t){return{type:"FETCH_PIPELINES_SUCCESS",response:Object(r.a)(t,c)}},u=function(t){return{type:"FETCH_PIPELINES_FAIL",error:t}},i=function(t){return{type:"FETCH_PIPELINE_SUCCESS",response:t}},l=function(t){return{type:"FETCH_PIPELINE_FAIL",error:t}}},54:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"c",function(){return i});var r=n(16),c=n(7),a=n(60),o={byId:{},ids:[],loading:!1};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_PIPELINES":return Object(c.a)({},t,{loading:!0});case"FETCH_PIPELINES_SUCCESS":return{byId:Object(c.a)({},t.byId,e.response.entities.pipeline),ids:Object(r.a)(t.ids).concat(Object(r.a)(e.response.result)),loading:!1};case"FETCH_PIPELINES_FAIL":return Object(c.a)({},t,{loading:!1});default:return t}};var u=function(t){return t.pipelines.loading},i=Object(a.a)([function(t){return t.pipelines.ids},function(t){return t.pipelines.byId}],function(t,e){return t.map(function(t){return e[t]})})},63:function(t,e,n){t.exports=n(83)},68:function(t,e,n){},74:function(t){t.exports={siteUrl:"https://zarcode.github.io/gitlab-ci-pwa",clientId:"134f639e5be587597c61a236573989ad112728cdb7c45b063ddbd327efb0a4d1"}},83:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(55),o=n.n(a),u=(n(68),n(30)),i=n(137),l=n(138),p=n(139),s=n(11),d=n(74),E=d.clientId,f=d.siteUrl;var b=function(t){var e=t.hash,n="https://gitlab.com/oauth/authorize?client_id=".concat(E,"&redirect_uri=").concat(f)+"&response_type=token&state=".concat(e);return c.a.createElement("div",null,c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("a",{href:n},"Login"))))},O=(n(58),function(t){return{type:"LOGIN_REQUESTED",token:t}}),j=function(){return{type:"LOGOUT"}},h=Object(r.lazy)(function(){return n.e(1).then(n.bind(null,133))}),I=Object(r.lazy)(function(){return Promise.all([n.e(4),n.e(2)]).then(n.bind(null,134))});var S=Object(u.b)(function(t){return{stateHash:"hello",auth:t.auth}},function(t){return{actions:Object(s.b)({login:O,logout:j},t)}})(function(t){var e=t.stateHash,n=t.auth,a=t.actions,o=new URLSearchParams(window.location.hash),u=o.get("#access_token"),s=o.get("state");return Object(r.useEffect)(function(){!n.isAuthenticated&&u&&s===e&&a.login(u)},[]),c.a.createElement(c.a.Fragment,null,n.isAuthenticated?c.a.createElement(i.a,null,c.a.createElement("div",null,c.a.createElement("button",{onClick:a.logout},"Logout"),c.a.createElement(r.Suspense,{fallback:c.a.createElement("div",null,"Loading...")},c.a.createElement(l.a,null,c.a.createElement(p.a,{exact:!0,path:"/",component:h}),c.a.createElement(p.a,{path:"/project/:projectId",component:I}))))):c.a.createElement(b,{hash:e}))}),_=n(135),v=n(140),C=n(31),g=n(46),m=n(130),T=n(131),y=n(136),P=n(132),F=n(43),L=n(26),k=n(7),w=n(25),H=n(23),U=n.n(H),N=function(t){return t.then(function(t){if(!t.ok)throw Error(t.statusText);return t}).then(function(t){return t.json()})},R=function(t){var e=t.url,n=t.token;Object(w.a)(t,["url","token"]);return fetch(e,{headers:{Authorization:"Bearer ".concat(n)}})},A=U()(N,R,function(t){return Object(k.a)({url:"https://gitlab.com/api/v4/user"},t)}),J=U()(function(t){return console.log(t),t},N,R,function(t){var e=t.userId,n=Object(w.a)(t,["userId"]);return Object(k.a)({url:"https://gitlab.com/api/v4/users/".concat(e,"/projects")},n)}),G=U()(N,R,function(t){var e=t.projectId,n=Object(w.a)(t,["projectId"]);return Object(k.a)({url:"https://gitlab.com/api/v4/projects/".concat(e,"/pipelines")},n)}),D=U()(N,R,function(t){var e=t.projectId,n=t.pipelineId,r=Object(w.a)(t,["projectId","pipelineId"]);return Object(k.a)({url:"https://gitlab.com/api/v4/projects/".concat(e,"/pipelines/").concat(n)},r)}),z=(U()(N,R,function(t){t.projectId;var e=Object(w.a)(t,["projectId"]);return Object(k.a)({url:"https://gitlab.com/api/v4/projects/:id/pipelines/:pipeline_id/jobs"},e)}),function(t){try{!function(t){var e=JSON.stringify(t);localStorage.setItem("state",e)}(t)}catch(e){return{type:"NOT_SAVED"}}return{type:"SAVED"}}),x=n(16),B=n(28),V=Object(v.a)(function(t,e){return t.pipe(Object(m.a)(function(t){return"LOGIN_REQUESTED"===t.type}),Object(T.a)(function(t){return Object(C.a)(A({token:t.token})).pipe(Object(T.a)(function(n){return Object(g.a)((r=n,{type:"FETCH_USER_SUCCESS",response:r})).pipe(Object(y.a)(Object(g.a)(z({auth:e.value.auth,user:n})),Object(g.a)({type:"LOGIN_SUCCESS",token:t.token}),Object(g.a)(Object(L.a)())));var r}),Object(P.a)(function(t){return Object(g.a)({type:"FETCH_USER_FAIL",error:t.message})}))}))},function(t,e){return t.pipe(Object(m.a)(function(t){return"LOGOUT"===t.type}),Object(F.a)(function(t){return z({auth:e.value.auth,user:{}})}))},function(t,e){return t.ofType("FETCH_PROJECTS").pipe(Object(T.a)(function(){return Object(C.a)(J({token:e.value.auth.token,userId:e.value.user.id})).pipe(Object(F.a)(function(t){return L.c(t)}),Object(P.a)(function(t){return Object(g.a)(L.b(t.message))}))}))},function(t,e){return t.ofType("FETCH_PIPELINES").pipe(Object(T.a)(function(t){return Object(C.a)(G({token:e.value.auth.token,projectId:t.projectId})).pipe(Object(T.a)(function(e){return Object(g.a)(B.e(e)).pipe(y.a.apply(void 0,Object(x.a)(e.map(function(e){return Object(g.a)({type:"FETCH_PIPELINE",pipelineId:e.id,projectId:t.projectId})}))))}),Object(P.a)(function(t){return Object(g.a)(B.d(t.message))}))}))},function(t,e){return t.ofType("FETCH_PIPELINE").pipe(Object(T.a)(function(t){return Object(C.a)(D({token:e.value.auth.token,pipelineId:t.pipelineId,projectId:t.projectId})).pipe(Object(F.a)(function(t){return B.c(t)}),Object(P.a)(function(t){return Object(g.a)(B.b(t.message))}))}))}),Q={isAuthenticated:!1,token:null},W=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"LOGIN_SUCCESS":return{isAuthenticated:!0,token:e.token};case"LOGOUT":return Q;default:return t}},X=n(54),M={list:[],loading:!1},$=Object(s.c)({auth:W,projects:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_PROJECTS":return Object(k.a)({},t,{loading:!0});case"FETCH_PROJECTS_SUCCESS":return{loading:!1,list:Object(x.a)(t.list).concat(Object(x.a)(e.response))};case"FETCH_PROJECTS_FAIL":return Object(k.a)({},t,{loading:!1});default:return t}},pipelines:X.a,user:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_USER_SUCCESS":return Object(k.a)({},t,e.response);case"FETCH_USER_FAIL":default:return t}}}),q=function(){try{var t=localStorage.getItem("state");if(null===t)return;return JSON.parse(t)}catch(e){return}}(),K=function(){var t=Object(_.a)(),e=[t],n=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,r=Object(s.e)($,q,n(s.a.apply(void 0,e)));return t.run(V),r}(),Y=function(){return c.a.createElement(u.a,{store:K},c.a.createElement(S,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[63,5,3]]]);
//# sourceMappingURL=main.2c45a070.chunk.js.map