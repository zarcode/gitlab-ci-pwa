{"version":3,"sources":["components/Login/index.js","actions/auth.js","actions/schema.js","actions/pipelines.js","reducers/pipelines.js","components/Project/index.js","components/Layout/index.js","api/index.js","epics/auth.js","localStorage.js","epics/index.js","actions/projects.js","epics/projects.js","epics/pipelines.js","reducers/auth.js","reducers/projects.js","reducers/index.js","reducers/user.js","configureStore.js","App.js","serviceWorker.js","index.js"],"names":["require","clientId","siteUrl","Login","_ref2","hash","loginURL","concat","react_default","a","createElement","href","login","token","type","logout","pipelines","schema","Entity","fetchPipelines","projectId","initialState","byId","ids","loading","getLoadingState","state","getPipelines","createSelector","allIds","allById","map","id","connect","dispatch","actions","bindActionCreators","_ref","match","history","useEffect","compose","chain","safe","isNumber","parseInt","propPath","Fragment","Link","to","item","key","stateHash","auth","urlParams","URLSearchParams","window","location","accessToken","get","stateHashParam","isAuthenticated","BrowserRouter","onClick","Switch","Route","exact","path","component","Projects","Project","components_Login","handleResponse","raw","then","response","ok","Error","statusText","r","json","getRequest","url","Object","objectWithoutProperties","fetch","headers","Authorization","fetchUser","props","objectSpread","fetchProjects","console","log","userId","rest","_ref3","fetchPipeline","_ref4","pipelineId","save","_ref5","value","serializedState","JSON","stringify","localStorage","setItem","saveState","_unused","combineEpics","action$","pipe","filter","switchMap","from","api","user","of","catchError","e","error","message","action","ofType","data","normalize","apply","toConsumableArray","pipeline","arguments","length","undefined","list","combineReducers","projects","entities","result","persistedState","getItem","parse","err","loadState","store","epicMiddleware","createEpicMiddleware","middleWares","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","createStore","appReducer","applyMiddleware","run","rootEpic","configureStore","App","es","components_Layout","Boolean","hostname","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.bc682968.chunk.js","sourcesContent":["import React from 'react';\n\nlet { clientId, siteUrl } = \n  process.env.NODE_ENV === 'production' ? \n  require('../../config.prod.json') : require('../../config.dev.json');\n\nfunction Login({ hash }) {\n    const loginURL = `https://gitlab.com/oauth/authorize?client_id=${clientId}&redirect_uri=${siteUrl}` + \n    `&response_type=token&state=${hash}`;\n    return (\n        <div>\n            <ul>\n                <li>\n                <a href={loginURL}>Login</a>\n                </li>\n            </ul>\n        </div>\n    )\n}\n\nexport default Login;","export const login = (token) => ({\n    type: 'LOGIN_REQUESTED',\n    token,\n});\n\nexport const loginSuccess = (token) => ({\n    type: 'LOGIN_SUCCESS',\n    token,\n});\n\nexport const logout = () => ({\n    type: 'LOGOUT',\n});\n\nexport const fetchUser = () => ({\n    type: 'FETCH_USER',\n  });\n\nexport const userSuccess = (response) => ({\n        type: 'FETCH_USER_SUCCESS',\n        response,\n    });\n\nexport const userFail = (error) => ({\n    type: 'FETCH_USER_FAIL',\n    error,\n});\n  ","import { schema } from 'normalizr';\n\nexport const pipeline = new schema.Entity('pipeline');\n\nexport const pipelines = [pipeline];","import { normalize } from 'normalizr';\nimport * as schema from './schema';\n\nexport const fetchPipelines = (projectId) => ({\n  type: 'FETCH_PIPELINES',\n  projectId,\n});\n\nexport const pipelinesSuccess = (response) => { \n  return ({\n    type: 'FETCH_PIPELINES_SUCCESS',\n    response: normalize(response, schema.pipelines),\n  });\n}\nexport const pipelinesFail = (error) => ({\n  type: 'FETCH_PIPELINES_FAIL',\n  error,\n});\n\nexport const fetchPipeline = (pipelineId) => ({\n  type: 'FETCH_PIPELINE',\n  pipelineId,\n});\n\nexport const pipelineSuccess = (response) => { \n  return ({\n    type: 'FETCH_PIPELINE_SUCCESS',\n    response\n  });\n}\nexport const pipelineFail = (error) => ({\n  type: 'FETCH_PIPELINE_FAIL',\n  error,\n});","import { createSelector } from 'reselect';\nconst initialState = {\n  byId: {},\n  ids: [],\n  loading: false,\n}\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case 'FETCH_PIPELINES':\n      return {\n        ...state,\n        loading: true,\n      }\n    case 'FETCH_PIPELINES_SUCCESS':\n      return {\n        byId: {\n          ...state.byId,\n          ...action.response.entities.pipeline,\n        },\n        ids: [\n          ...state.ids,\n          ...action.response.result,\n        ],\n        loading: false,\n      };\n    case 'FETCH_PIPELINES_FAIL':\n      return {\n        ...state,\n        loading: false,\n      }\n    default:\n      return state;\n  }\n};\n\nexport const getById = (state: any) => state.pipelines.byId;\nexport const getIds = (state: any) => state.pipelines.ids;\nexport const getLoadingState = (state: any) => state.pipelines.loading;\nexport const getPipelines = createSelector([getIds, getById], (allIds, allById) =>\nallIds.map(id => allById[id]));\n  ","import React, { useEffect } from 'react';\nimport { bindActionCreators } from 'redux';\nimport {\n  Link,\n} from \"react-router-dom\";\nimport {connect} from \"react-redux\";\nimport propPath from 'crocks/Maybe/propPath';\nimport safe from 'crocks/Maybe/safe';\nimport isNumber from 'crocks/predicates/isNumber';\nimport isString from 'crocks/predicates/isString';\nimport propPathOr from 'crocks/helpers/propPathOr';\nimport compose from 'crocks/helpers/compose';\nimport map from 'crocks/pointfree/map';\nimport chain from 'crocks/pointfree/chain';\nimport safeLift from 'crocks/Maybe/safeLift';\nimport liftA2 from 'crocks/helpers/liftA2';\n\nimport { fetchPipelines } from '../../actions/pipelines';\nimport { getPipelines, getLoadingState } from '../../reducers/pipelines';\n\n// const goBack = history => history.goBack;\n\nfunction Project({ pipelines, loading, actions, match, history }) {\n  useEffect(() => {\n    if(!loading) {\n      compose(\n        map(actions.fetchPipelines),\n        chain(safe(isNumber)),\n        map(parseInt),\n        propPath(['params', 'projectId'])\n      )(match)\n    }\n  }, []);\n  return (\n    <>\n      <Link to={'/'}>Projects</Link>\n      <h2>Project</h2>\n      {pipelines.map(item => (\n        <div key={item.id}>\n          <h3>{`#${item.id}`}</h3>\n          <div></div>\n        </div>\n      ))}\n    </>\n  );\n}\n\nfunction mapStateToProps(state) {\n\treturn {\n    pipelines: getPipelines(state),\n    loading: getLoadingState(state),\n\t};\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return { \n    actions: bindActionCreators({ fetchPipelines }, dispatch),\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Project);","import React, { useEffect, Component, lazy, Suspense } from 'react';\nimport {\n  BrowserRouter as Router,\n  Route,\n  Switch,\n  Link,\n  Redirect,\n  withRouter\n} from \"react-router-dom\";\nimport { bindActionCreators } from 'redux';\nimport {connect} from \"react-redux\";\nimport Login from '../Login';\nimport { hashFunction } from '../../utils';\nimport { login, logout } from '../../actions/auth';\nimport Projects from '../Project';\nimport Project from '../Project';\n// const Projects = lazy(() => import('../Projects'));\n// const Project = lazy(() => import('../Project'));\n\nfunction Layout({ stateHash, auth, actions }) {\n  const urlParams = new URLSearchParams(window.location.hash);\n  const accessToken = urlParams.get(\"#access_token\");\n  const stateHashParam = urlParams.get(\"state\");\n\n  useEffect(() => {\n    if(!auth.isAuthenticated && accessToken && stateHashParam === stateHash) {\n      actions.login(accessToken);\n    }\n  }, []);\n\n  // console.log(Projects);\n  \n  return (\n    <>\n      {!auth.isAuthenticated ? (\n        <Login hash={stateHash}/>\n      ) : (\n        <Router>\n          <div>\n            <button onClick={actions.logout}>Logout</button>\n            {/* <Suspense fallback={<div>Loading...</div>}> */}\n              <Switch>\n                <Route exact path=\"/\" component={Projects} />\n                <Route path=\"/project/:projectId\" component={Project} />\n              </Switch>\n            {/* </Suspense> */}\n          </div>\n        </Router>\n      )}\n    </>\n  );\n}\n\nfunction mapStateToProps(state) {\n\treturn {\n    // stateHash: hashFunction(state),\n    stateHash: \"hello\",\n    auth: state.auth,\n\t};\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return { \n    actions: bindActionCreators({ login, logout }, dispatch),\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Layout);\n","import compose from 'crocks/helpers/compose';\n\nconst handleResponse = (raw) =>\n  raw\n  .then(function(response) {\n    if (!response.ok) {\n      throw Error(response.statusText);\n    }\n    return response;\n  })\n  .then(r => r.json())\n\n// const splitParams = ({ token, ...rest}) => \n\nconst log = (props) => {\n  console.log(props);\n  return props;\n}\n\nconst getRequest = ({ url, token, ...rest}) => \n  fetch( \n    url, \n    {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          // \"Content-Type\": \"application/json; charset=utf-8\",\n        },\n        // body: JSON.stringify(rest),\n    }\n  )\n\nexport const fetchUser = compose(\n    handleResponse,\n    getRequest,\n    (props) => ({ url: `https://gitlab.com/api/v4/user`, ...props})\n  )\n\nexport const fetchProjects = compose(\n    log,\n    handleResponse,\n    getRequest,\n    ({ userId, ...rest }) => ({ url: `https://gitlab.com/api/v4/users/${userId}/projects`, ...rest})\n  )\n\nexport const fetchPipelines = compose(\n    handleResponse,\n    getRequest,\n    ({ projectId, ...rest }) => ({ url: `https://gitlab.com/api/v4/projects/${projectId}/pipelines`, ...rest})\n  )\n\nexport const fetchPipeline = compose(\n    handleResponse,\n    getRequest,\n    ({ projectId, pipelineId, ...rest }) => ({ url: `https://gitlab.com/api/v4/projects/${projectId}/pipelines/${pipelineId}`, ...rest})\n  )\n\nexport const fetchPipelineJobs = compose(\n    handleResponse,\n    getRequest,\n    ({ projectId, ...rest }) => ({ url: `https://gitlab.com/api/v4/projects/:id/pipelines/:pipeline_id/jobs`, ...rest})\n  )","import { of, from } from 'rxjs';\nimport {\n  filter,\n  map,\n  concat,\n  switchMap,\n  catchError,\n  tap,\n} from 'rxjs/operators';\nimport { saveState } from '../localStorage';\nimport * as userActions from '../actions/auth';\nimport { fetchProjects } from '../actions/projects';\nimport * as api from '../api';\n\nconst save = (value) => {\n  try {\n    saveState(value);\n  } catch {\n    return {\n      type: 'NOT_SAVED'\n    }\n  }\n  return {\n    type: 'SAVED'\n  }\n}\n\nexport const login = (action$, state) => \n{\n  return action$.pipe(\n    filter((a: Action) =>\n      a.type === 'LOGIN_REQUESTED'),\n    switchMap(a => {\n      return from(api.fetchUser({\n        token: a.token\n      })).pipe(\n        switchMap(user => {\n          return of(userActions.userSuccess(user)).pipe(concat(\n            of(save({\n                auth: state.value.auth,\n                user,\n            })),\n            of(userActions.loginSuccess(a.token)),\n            of(fetchProjects()),\n          ))\n        }),\n        catchError(e => of(userActions.userFail(e.message)))\n      );\n    })\n  )\n}\n\nexport const logout = (action$, state) => \n{\n  return action$.pipe(\n    filter((a: Action) =>\n      a.type === 'LOGOUT'),\n    map(a => save({\n      auth: state.value.auth,\n      user: {}\n    }))\n  )\n}","export const loadState = () => {\n    try {\n        const serializedState = localStorage.getItem('state');\n        if (serializedState === null) {\n        return undefined;\n        }\n        return JSON.parse(serializedState);\n    } catch (err) {\n        return undefined;\n    }\n};\n\nexport const saveState = (state) => {\n  const serializedState = JSON.stringify(state);\n  localStorage.setItem('state', serializedState);\n};","import { combineEpics } from 'redux-observable';\nimport { login, logout } from './auth';\nimport { loadProjects } from './projects';\nimport { loadPipelines, loadPipeline } from './pipelines';\n\nexport default combineEpics(\n    login, logout,\n    loadProjects,\n    loadPipelines,\n    loadPipeline,\n);","export const fetchProjects = () => ({\n  type: 'FETCH_PROJECTS',\n});\n\nexport const projectsSuccess = (response) => { \n  return ({\n    type: 'FETCH_PROJECTS_SUCCESS',\n    response,\n  });\n}\nexport const projectsFail = (error) => ({\n  type: 'FETCH_PROJECTS_FAIL',\n  error,\n});","import { from, of } from 'rxjs';\nimport {\n  switchMap,\n  map,\n  filter,\n  catchError,\n  takeUntil,\n} from 'rxjs/operators';\n\nimport * as projectsActions from '../actions/projects';\nimport * as api from '../api';\n\nexport const loadProjects = (action, state) =>\n  action.ofType('FETCH_PROJECTS').pipe(\n    switchMap(() => {\n      const requestAction = from(api.fetchProjects({\n        token: state.value.auth.token,\n        userId: state.value.user.id,\n      })).pipe(\n        map(data => projectsActions.projectsSuccess(data)),\n        catchError(e => of(projectsActions.projectsFail(e.message)))\n      );\n      \n      return requestAction;\n        // .takeUntil(action\n        //   .filter(futureAction => futureAction.type === 'FETCH_PROJECTS'));\n    })\n  );","import { from, of } from 'rxjs';\nimport {\n  switchMap,\n  map,\n  filter,\n  catchError,\n  takeUntil,\n  concat,\n} from 'rxjs/operators';\n\nimport * as pipelinesActions from '../actions/pipelines';\n// import asObservable from './rxUtils';\nimport * as api from '../api';\n\nexport const loadPipelines = (action$, state) =>\n  action$.ofType('FETCH_PIPELINES').pipe(\n    switchMap((a) => {\n      const requestAction = from(api.fetchPipelines({\n        token: state.value.auth.token,\n        projectId: a.projectId,\n      })).pipe(\n        switchMap(data => \n          of(pipelinesActions.pipelinesSuccess(data))\n          .pipe(\n            concat(\n              ...data.map(pipeline => of({ \n                type: 'FETCH_PIPELINE',  \n                pipelineId: pipeline.id,\n                projectId: a.projectId,\n              }))\n            )\n          )\n        ),\n        // map(data => pipelinesActions.pipelinesSuccess(data)),\n        catchError(e => of(pipelinesActions.pipelinesFail(e.message)))\n      );\n      return requestAction;\n        // .takeUntil(action\n        //   .filter(futureAction => futureAction.type === 'FETCH_PIPELINES'));\n    })\n  );\n\nexport const loadPipeline = (action$, state) =>\n  action$.ofType('FETCH_PIPELINE').pipe(\n    switchMap((a) => {\n      const requestAction = from(api.fetchPipeline({\n        token: state.value.auth.token,\n        pipelineId: a.pipelineId,\n        projectId: a.projectId,\n      })).pipe(\n        map(data => pipelinesActions.pipelineSuccess(data)),\n        catchError(e => of(pipelinesActions.pipelineFail(e.message)))\n      );\n      return requestAction;\n        // .takeUntil(action\n        //   .filter(futureAction => futureAction.type === 'FETCH_PIPELINES'));\n    })\n  );","const initialState = {\n    isAuthenticated: false,\n    token: null,\n}\n\nconst auth = (state = initialState, action) => {\n    switch (action.type) {\n        case 'LOGIN_SUCCESS':\n            return {\n                isAuthenticated: true,\n                token: action.token,\n            }\n        case 'LOGOUT':\n            return initialState;\n        default:\n            return state;\n    }\n};\n\nexport default auth;\n  ","const initialState = {\n  list: [],\n  loading: false,\n}\n\nexport default (state = initialState, action) => {\n    switch (action.type) {\n      case 'FETCH_PROJECTS':\n        return {\n          ...state,\n          loading: true,\n        };\n      case 'FETCH_PROJECTS_SUCCESS':\n        return {\n          loading: false,\n          list: [\n            ...state.list,\n            ...action.response,\n          ]\n        }\n      case 'FETCH_PROJECTS_FAIL':\n        return {\n          ...state,\n          loading: false,\n        };\n      default:\n        return state;\n    }\n  };\n  ","import { combineReducers } from 'redux';\nimport auth from './auth';\nimport pipelines from './pipelines';\nimport projects from './projects';\nimport user from './user';\n\nexport default combineReducers({\n    auth,\n    projects,\n    pipelines,\n    user,\n});","export default (state = {}, action) => {\n    switch (action.type) {\n      case 'FETCH_USER_SUCCESS':\n        return {\n          ...state,\n          ...action.response,\n        };\n      case 'FETCH_USER_FAIL':\n        return state;\n      default:\n        return state;\n    }\n  };","/* @flow */\n\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport { createEpicMiddleware } from 'redux-observable';\nimport { loadState, saveState } from './localStorage';\n\nimport rootEpic from './epics/';\nimport appReducer from './reducers';\n\nconst persistedState = loadState();\n\nexport default () => {\n  const epicMiddleware = createEpicMiddleware();\n\n  const middleWares = [\n    epicMiddleware,\n  ];\n  /* eslint-disable no-underscore-dangle */\n  const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n  /* eslint-enable */\n\n  const store = createStore(appReducer, persistedState, composeEnhancers(\n    applyMiddleware(...middleWares)\n  ));\n\n  // store.subscribe(() => {\n  //   saveState({\n  //     auth: store.getState().auth,\n  //   });\n  // });\n    \n  epicMiddleware.run(rootEpic);\n\n  return store;\n};","import React from 'react';\nimport { Provider } from 'react-redux';\nimport Layout from './components/Layout/index';\nimport configureStore from './configureStore';\n\nconst store = configureStore();\n\nconst App = () => (\n  <Provider store={store}>\n    <Layout />\n  </Provider>\n);\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}